!function(e){e(window)}(function(e){function r(e){return Object.prototype.toString.call(e)}function t(e){return r(e)===b}function a(e){return e.value||e.getAttribute("data-value")||""}function u(e,r){return x[e]>=x[r]}function n(e){for(var r,t=[],a=[],n=[],s=0,o="",i="",l=e.length;l>s;)switch(r=e[s++]){case"{":case"}":case"!":o.length>0&&t.push(o),t.push(r),o="";break;case"&":case"|":r===i?(o.length>0&&t.push(o),t.push(i+i),o="",i=""):i+=r;break;default:o+=r}o.length>0&&t.push(o),s=0,l=t.length;for(var c,F;l>s;)switch(r=t[s++]){case"{":n.push(r);break;case"||":case"&&":case"!":for(c=n.length-1;c>=0&&("||"===n[c]||"&&"===n[c]||"!"===n[c])&&u(n[c],r);)a.push(n.pop()),c--;n.push(r);break;case"}":for(c=n.length-1;c>=0&&(F=n.pop(),"{"!==F);)a.push(F),c--;break;default:a.push(r)}if(n.length>0)for(c=n.length-1;c>=0&&(F=n.pop(),"{"!==F);)a.push(F),c--;return a}function s(e,t,u){var n=e.split(":");e=n[0].replace(/length/i,"long");var s,i=u?$[e]||m[e]:this.cs[e]||$[e]||m[e];switch(r(i)){case b:s=o.call(this,i,t,u);break;case w:var l,c=n.slice(1);switch(e){case"long":l=k.getLengthParams(c);break;case"range":l=k.getRangeParams(c);break;default:l=c}if(u)l.unshift(t);else{for(var F=[],h=0;h<t.length;++h)F.push(a(t[h]));l.unshift(F)}s=i.apply(null,l);break;default:throw new TypeError("Checker for rule "+n[0]+" must be a Function.")}return s}function o(e,t,a){for(var u=[],n=0;n<e.length;++n){var o=e[n];switch(o){case"&&":var i=u.pop(),l=u.pop(),c=(r(l)===d?s.call(this,l,t,a):l)&&(r(i)===d?s.call(this,i,t,a):i);u.push(c);break;case"||":var i=u.pop(),l=u.pop(),c=(r(l)===d?s.call(this,l,t,a):l)||(r(i)===d?s.call(this,i,t,a):i);u.push(c);break;case"!":var l=u.pop(),c=!(r(l)===d?s.call(this,l,t,a):l);u.push(c);break;default:u.push(o)}}var F=u.pop();return r(F)===d?s.call(this,F,t,a):F}function i(e){e=e||[],this.cs={},this.vs=[],t(e)||(e=[e]);for(var r=0;r<e.length;++r){var a=e[r].field;t(a)||(a=[a]);var u=e[r].rules;u=t(u)?u:[u];for(var s=0;s<u.length;++s)u[s].queue=n(u[s].type);this.vs.push({$fs:a,rs:u})}}function l(e){return null===e||typeof e===D||""===e}function c(e){for(var r=!0,t=0;t<e.length-1;++t)if(e[t]!==e[t+1]){r=!1;break}return r}function F(e){for(var r=!0,t=0;t<e.length;++t)if(!l(e[t])){r=!1;break}return r}function h(e,r,t){for(var a=!0,u=0;u<e.length;++u){var n=e[u].length;if(r>n||n>t){a=!1;break}}return a}function f(e,r,t,a,u){for(var n=!0,s=0;s<e.length;++s){var o=e[s];if(r&&t>o||u&&o>a||!r&&t>=o||!u&&o>=a){n=!1;break}}return n}function p(e,t){var a;switch(r(t)){case y:a=function(e){return t.test(e)};break;case w:a=t;break;default:throw new TypeError("Matcher Type Error.")}m[e]=a,C[e]=a,z[e]=function(){return!a.apply(null,arguments)}}function v(e,t){var a;switch(r(t)){case d:var u;try{u=n(t)}catch(s){throw new Error(s)}a=u;break;case y:a=function(e){return t.test(e)};break;case w:a=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}$[e]=a}var g=function(e){return this.hasOwnProperty(e)},d="[object String]",b="[object Array]",w="[object Function]",y="[object RegExp]",D="undefined",k={};k.trim=function(e){return e.replace(/^\s+|\s$/g,"")},k.getLengthParams=function(e){var r="The parameters for length is illegal.";e=e[0];var t=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,a=e.match(t);if(null===a)throw new TypeError(r);var u=a[2],n=a[3];if(typeof u===D)u=0;else if("("===a[1])u=+u+1;else{if("["!==a[1])throw new TypeError(r);u=+u}if(typeof n===D)n=1/0;else if(")"===a[4])n=+n-1;else{if("]"!==a[4])throw new TypeError(r);n=+n}if(u!==u||n!==n)throw new TypeError(r);return[u,n]},k.getRangeParams=function(e){var r="The parameters for range is illegal.";e=e[0];var t=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,a=e.match(t);if(null===a)throw new TypeError(r);var u,n,s=a[2],o=a[6];return s=typeof s===D?-(1/0):+s,u="["===a[1],o=typeof o===D?1/0:+o,n="]"===a[10],[u,s,o,n]};var x={"||":0,"&&":1,"!":2},E=i.prototype;E.add=function(e){function a(e){var a,u=e.rule;switch(r(u)){case w:a=u;break;case d:var n=this;a=function(e){var r=n.cs[u]||$[u]||m[u];if(typeof r===D)throw new TypeError("Cannot find checker: "+u);return r(e)};break;case y:a=function(r){var a=!0;if(t(r)){for(var n=0,s=r.length;s>n;++n)if(!u.test(r[n])){a=!1;break}}else e.rule.test(r)||(a=!1);return a};break;default:throw new TypeError("Rule type not support.")}this.cs[e.name]=a}if(t(e))for(var u=0,n=e.length;n>u;++u)a.call(this,e[u]);else a.call(this,e);return this},E.check=function(e){for(var r=!0,t=this.vs,a=0;a<t.length;++a){for(var u=t[a].$fs,n=t[a].rs,s=0;s<n.length;++s){var i=n[s];if(r=o.call(this,i.queue,u,!1),!r){var l=u.length<2?u[0]:u;i.fail.call(l,e);break}}if(!r)break}return r},E.remove=function(e){function r(e){typeof this.cs[e]!==D&&delete this.cs[e]}if(t(e))for(var a=0,u=e.length;u>a;++a)r.call(this,e[a]);else r.call(this,e);return this};var m={},A={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,upperCase:/^[A-Z]+$/g,lowerCase:/^[a-z]$/g,empty:F,equal:c,"long":h,range:f},$={},C=i.is=function(e,t){var a,u=$[e]||m[e];switch(r(u)){case b:a=o.call(this,u,t,!0);break;case w:a=u(t);break;default:throw new TypeError("Checker for "+e+" is not defined.")}return a},z=i.not=function(e,r){return!C(e,r)};for(var T in A)g.call(A,T)&&p(T,A[T]);i.api=function(e){for(var r in e)g.call(e,r)&&v.call(this,r,e[r]);return this},i.api.list=function(){console.log($)};var _=function(e,r){this.vs=[],this.cs={},this.$form="string"==typeof e?document.querySelectorAll(e)[0]:e,r=r||[],t(r)||(r=[r]);for(var a=0,u=r.length;u>a;++a){var s=r[a].field;t(s)||(s=[s]);for(var o=[],i=0;i<s.length;++i){var l=this.$form.querySelectorAll("[name="+s[i]+"]")[0]||this.$form.querySelectorAll("[data-name="+s[i]+"]")[0];if(typeof l===D)throw new TypeError("未找到域："+s[i]);o.push(l)}var c=r[a].rules;c=t(c)?c:[c];for(var F=0;F<c.length;++F)c[F].queue=n(c[F].type);this.vs.push({$fs:o,rs:c})}};_.prototype=new i,_.prototype.constructor=_,_.prototype.check=function(){return i.prototype.check.call(this,this.$form)},e.Validator=i,e.FormValidator=_});
//# sourceMappingURL=spa-public-validator.min.js.map