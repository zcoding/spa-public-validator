!function(e){"function"==typeof define&&define.cmd?define(function(r,t,n){e(t)}):e(window)}(function(e){function r(e){return null===e||"undefined"==typeof e||""===e}function t(e,r){"undefined"!=typeof c[e]&&console.warn('Warning: current api "'+e+'" will be overwritten.'),c[e]=r,h[e]=function(r){return!c[e](r)}}var n=Object.prototype.toString,i={};i.isArray=function(e){return i.type(e)===i.TYPE_ARRAY},i.isFunction=function(e){return i.type(e)===i.TYPE_FUNCTION},i.getValue=function(e){return"undefined"==typeof e.value?e.getAttribute("data-value")||"":e.value},i.getChecker=function(e){var r=e.split(":");e=r[0].replace(/length/i,"long");var t=u.checkers[e];if(!i.isFunction(t))throw new TypeError("Checker for rule "+r[0]+" must be a Function.");var n,o=r.slice(1);switch(e){case"long":n=i.getLengthParams(o);break;default:n=o}return[t,n]},i.getLengthParams=function(e){e=e[0];var r=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,t=e.match(r);if(null===t)throw new TypeError("The parameters for length is illegal.");var n=t[2],i=t[3];if("undefined"==typeof n)n=0;else if("("===t[1])n=+n+1;else{if("["!==t[1])throw new TypeError("The parameters for length is illegal.");n=+n}if("undefined"==typeof i)i=Infinite;else if(")"===t[4])i=+i-1;else{if("]"!==t[4])throw new TypeError("The parameters for length is illegal.");i=+i}if(n!==n||i!==i)throw new TypeError("The parameters for length is illegal.");return[n,i]},i.type=function(e){return n.call(e)},i.TYPE_STRING="[object String]",i.TYPE_ARRAY="[object Array]",i.TYPE_FUNCTION="[object Function]",i.TYPE_REGEXP="[object RegExp]";var o=function(){this.rules=[]},a=o.prototype;a.add=function(e){return i.isArray(e)?this.rules=this.rules.concat(e):this.rules.push(e),this},a.remove=function(e){if(i.isArray(e))for(var r=0,t=e.length;t>r;++r)for(var n=0;n<this.rules.length;++n)this.rules[n].name===e[r]&&this.rules.splice(n,1);else for(var n=0;n<this.rules.length;++n)this.rules[n].name===e&&this.rules.splice(n,1);return this},a.createFormValidator=function(e,r){return new l(e,r)};var l=function(e,r){this.$form="string"==typeof e?document.querySelectorAll(e)[0]:e,this.validations=[],i.isArray(r)||(r=[r]);for(var t=0,n=r.length;n>t;++t){var o=r[t].field;i.isArray(o)||(o=[o]);for(var a=[],l=0;l<o.length;++l)a.push(this.$form.querySelectorAll("[name="+o[l]+"]")[0]);var s=r[t].rules;s=i.isArray(s)?s:[s],this.validations.push({$field:a,rules:s})}};l.prototype=new o,l.prototype.constructor=l,l.prototype.check=function(){for(var e=this.$form,r=this.validations,t=!0,n=0,o=r.length;o>n;++n){for(var a=r[n].$field,l=r[n].rules,s=0;s<l.length;++s){for(var u=l[s],f=i.getChecker(u.type),c=[],h=0;h<a.length;++h)c.push(i.getValue(a[h]));if(f[1].unshift(c),!f[0].apply(null,f[1])){var p=a.length<2?a[0]:a;u.fail.call(p,e),t=!1;break}}if(!t)break}return t};var s=["empty","length","email","url","yes"],u={},f={};f.notEmpty=function(e){for(var t=!0,n=0,i=e.length;i>n;++n)if(r(e[n])){t=!1;break}return t},f["long"]=function(e,r,t){for(var n=!0,i=0,o=e.length;o>i;++i){var a=e[i].length;if(r>a||a>t){n=!1;break}}return n},u.checkers=f;var c=function(e,r){return c[e](r)},h=function(e,r){return h[e](r)};o.is=c,o.not=h,o.not=h;for(var p=0,g=s.lenght;g>p;++p)t(s[p],u.checkers[s[p]]);o.api=function(e,r,n){var a=i.type(n);if(!/is|not/.test(e))throw new TypeError('The api type "'+e+'" is not support.');var l,s="is"===e;switch(a){case i.TYPE_STRING:var f=n.split(":"),c=u.checkers[f[0]];if("undefined"==typeof c)throw new TypeError("Checker "+f[0]+" is not defined.");l=function(e){var r=c.call(this,f.slice(1));return s?r:!r};break;case i.TYPE_REGEXP:l=function(e){var r=n.test(e);return s?r:!r};break;case i.TYPE_FUNCTION:l=n;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}return t(r,l),o},o.api.list=function(){return s},e.Validator=o});
//# sourceMappingURL=spa-public-validator.min.js.map