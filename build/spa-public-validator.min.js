!function(r){r(window)}(function(r){function e(r){return Object.prototype.toString.call(r)}function t(r){return e(r)===p}function u(r){return e(r)===v}function n(r){this.cs={},r=r||[],this.vs=[],t(r)||(r=[r]);for(var e=0,u=r.length;u>e;++e){var n=r[e].field;t(n)||(n=[n]);for(var a=[],o=0;o<n.length;++o)a.push(this.$form.querySelectorAll("[name="+n[o]+"]")[0]);var i=r[e].rules;i=t(i)?i:[i],this.vs.push({$field:a,rules:i})}}function a(r){return null===r||typeof r===d||""===r}function o(r){for(var e=!0,t=0;t<r.length-1;++t)if(r[t]!==r[t+1]){e=!1;break}return e}function i(r){for(var e=!0,t=0;t<r.length;++t)if(!a(r[t])){e=!1;break}return e}function F(r,e,t){for(var u=!0,n=0;n<r.length;++n){var a=r[n].length;if(e>a||a>t){u=!1;break}}return u}function s(r,e,t,u,n){for(var a=!0,o=0;o<r.length;++o){var i=r[o];if(e&&t>i||n&&i>u||!e&&t>=i||!n&&i>=u){a=!1;break}}return a}function f(r,t){var u;switch(e(t)){case g:u=function(r){return t.test(r)};break;case v:u=t;break;default:throw new TypeError("Matcher Type Error.")}w[r]=u,E[r]=u,b[r]=function(){return u.apply(null,arguments)}}function l(r){var e=r.split(":");r=e[0].replace(/length/i,"long");var t=this.cs[r]||m[r]||w[r];if(!u(t))throw new TypeError("Checker for rule "+e[0]+" must be a Function.");var n,a=e.slice(1);switch(r){case"long":n=y.getLengthParams(a);break;case"range":n=y.getRangeParams(a);break;default:n=a}return[t,n]}var c=function(r){return this.hasOwnProperty(r)},h="[object String]",p="[object Array]",v="[object Function]",g="[object RegExp]",d="undefined",y={};y.trim=function(r){return r.replace(/^\s+|\s$/g,"")},y.getValue=function(r){return r.value||r.getAttribute("data-value")||""},y.getLengthParams=function(r){var e="The parameters for length is illegal.";r=r[0];var t=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,u=r.match(t);if(null===u)throw new TypeError(e);var n=u[2],a=u[3];if(typeof n===d)n=0;else if("("===u[1])n=+n+1;else{if("["!==u[1])throw new TypeError(e);n=+n}if(typeof a===d)a=1/0;else if(")"===u[4])a=+a-1;else{if("]"!==u[4])throw new TypeError(e);a=+a}if(n!==n||a!==a)throw new TypeError(e);return[n,a]},y.getRangeParams=function(r){var e="The parameters for range is illegal.";r=r[0];var t=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,u=r.match(t);if(null===u)throw new TypeError(e);var n,a,o=u[2],i=u[6];return o=typeof o===d?-(1/0):+o,n="["===u[1],i=typeof i===d?1/0:+i,a="]"===u[10],[n,o,i,a]};var D=n.prototype;D.add=function(r){function u(r){switch(e(r.rule)){case v:this.cs[r.name]=r.rule;break;case h:this.cs[r.name]=function(){};break;case g:this.cs[r.name]=function(e){var u=!0;if(t(e)){for(var n=0,a=e.length;a>n;++n)if(!r.rule.test(e[n])){u=!1;break}}else r.rule.test(e)||(u=!1);return u};break;default:throw new TypeError("Rule type not support.")}}if(t(r))for(var n=0,a=r.length;a>n;++n)u.call(this,r[n]);else u.call(this,r);return this},D.check=function(){return this},D.remove=function(r){function e(r){typeof this.cs[r]!==d&&delete this.cs[r]}if(t(r))for(var u=0,n=r.length;n>u;++u)e(r[u]);else e(r);return this};var w={},x={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,upperCase:/^[A-Z]+$/g,lowerCase:/^[a-z]$/g,empty:i,equal:o,"long":F,range:s},m={},E=n.is=function(r,e){var t=m[r]||w[r];if(!u(t))throw new TypeError("Checker for "+r+" is not defined.");return t(e)},b=n.not=function(r,e){var t=m[r]||w[r];if(!u(t))throw new TypeError("Checker for "+r+" is not defined.");return function(r){return!t(r)}};for(var A in x)c.call(x,A)&&f(A,x[A]);n.api=function(r){function u(r,t){var u;switch(e(t)){case h:var n=t.split(":"),a=w[n[0]];if(typeof a===d)throw new TypeError("Checker "+n[0]+" is not defined.");u=function(r){return a.call(this,n.slice(1))};break;case g:u=function(r){return t.test(r)};break;case v:u=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}m[r]=u}if(t(r))for(var a=0;a<r.length;++a)u(r[a]);else u(r);return n};var k=function(r,e){this.vs=[],this.$form="string"==typeof r?document.querySelectorAll(r)[0]:r,t(e)||(e=[e]);for(var u=0,n=e.length;n>u;++u){var a=e[u].field;t(a)||(a=[a]);for(var o=[],i=0;i<a.length;++i){var F=this.$form.querySelectorAll("[name="+a[i]+"]")[0]||this.$form.querySelectorAll("[data-name="+a[i]+"]")[0];if(typeof F===d)throw new TypeError("未找到域："+a[i]);o.push(F)}var s=e[u].rules;s=t(s)?s:[s],this.vs.push({$fs:o,rs:s})}};k.prototype=new n,k.prototype.constructor=k,k.prototype.check=function(){for(var r=this.$form,e=this.vs,t=!0,u=0;u<e.length;++u){for(var n=e[u].$fs,a=e[u].rs,o=0;o<a.length;++o){for(var i=a[o],F="!"===i.type[0],s=F?i.type.slice(1):i.type,f=l.call(this,s),c=[],h=0;h<n.length;++h)c.push(y.getValue(n[h]));f[1].unshift(c);var p=f[0].apply(null,f[1]);if(F&&p||!F&&!p){var v=n.length<2?n[0]:n;i.fail.call(v,r),t=!1;break}}if(!t)break}return t},r.Validator=n,r.FormValidator=k});
//# sourceMappingURL=spa-public-validator.min.js.map