!function(e){e(window)}(function(e){function r(e){return Object.prototype.toString.call(e)}function t(e){return r(e)===w}function u(e){return r(e)===D}function a(e,r){return E[e]>=E[r]}function n(e){for(var r,t=[],u=[],n=[],o=0,s="",i="",l=e.length;l>o;)switch(r=e[o++]){case"{":case"}":case"!":s.length>0&&t.push(s),t.push(r),s="";break;case"&":case"|":r===i?(s.length>0&&t.push(s),t.push(i+i),s="",i=""):i+=r;break;default:s+=r}s.length>0&&t.push(s),o=0,l=t.length;for(var c,f;l>o;)switch(r=t[o++]){case"{":n.push(r);break;case"||":case"&&":case"!":for(c=n.length-1;c>=0&&("||"===n[c]||"&&"===n[c]||"!"===n[c])&&a(n[c],r);)u.push(n.pop()),c--;n.push(r);break;case"}":for(c=n.length-1;c>=0&&(f=n.pop(),"{"!==f);)u.push(f),c--;break;default:u.push(r)}if(n.length>0)for(c=n.length-1;c>=0&&(f=n.pop(),"{"!==f);)u.push(f),c--;return u}function o(e){var r=e.split(":");e=r[0].replace(/length/i,"long");var t=this.cs[e]||C[e]||A[e];if(!u(t))throw new TypeError("Checker for rule "+r[0]+" must be a Function.");var a,n=r.slice(1);switch(e){case"long":a=x.getLengthParams(n);break;case"range":a=x.getRangeParams(n);break;default:a=n}return[t,a]}function s(e,r){for(var t=[],u=0;u<r.length;++u)t.push(x.getValue(r[u]));return e[1].unshift(t),e[0].apply(null,e[1])}function i(e,t){for(var u=[],a=0;a<e.length;++a){var n=e[a];switch(n){case"&&":var i=u.pop(),l=u.pop(),c=(r(l)===y?s(o.call(this,l),t):l)&&(r(i)===y?s(o.call(this,i),t):i);u.push(c);break;case"||":var i=u.pop(),l=u.pop(),c=(r(l)===y?s(o.call(this,l),t):l)||(r(i)===y?s(o.call(this,i),t):i);u.push(c);break;case"!":var l=u.pop(),c=!(r(l)===y?s(o.call(this,l),t):l);u.push(c);break;default:u.push(n)}}var f=u.pop();return r(f)===y?s(o.call(this,f),t):f}function l(e){e=e||[],this.cs={},this.vs=[],t(e)||(e=[e]);for(var r=0;r<e.length;++r){var u=e[r].field;t(u)||(u=[u]);var a=e[r].rules;a=t(a)?a:[a];for(var o=0;o<a.length;++o)a[o].queue=n(a[o].type);this.vs.push({$fs:u,rs:a})}}function c(e){return null===e||typeof e===k||""===e}function f(e){for(var r=!0,t=0;t<e.length-1;++t)if(e[t]!==e[t+1]){r=!1;break}return r}function F(e){for(var r=!0,t=0;t<e.length;++t)if(!c(e[t])){r=!1;break}return r}function h(e,r,t){for(var u=!0,a=0;a<e.length;++a){var n=e[a].length;if(r>n||n>t){u=!1;break}}return u}function p(e,r,t,u,a){for(var n=!0,o=0;o<e.length;++o){var s=e[o];if(r&&t>s||a&&s>u||!r&&t>=s||!a&&s>=u){n=!1;break}}return n}function v(e,t){var u;switch(r(t)){case b:u=function(e){return t.test(e)};break;case D:u=t;break;default:throw new TypeError("Matcher Type Error.")}A[e]=u,z[e]=u,T[e]=function(){return!u.apply(null,arguments)}}function g(e,t){var u;switch(r(t)){case y:var a=t.split(":"),n=A[a[0]];if(typeof n===k)throw new TypeError("Checker "+a[0]+" is not defined.");u=function(e){return n.call(this,a.slice(1))};break;case b:u=function(e){return t.test(e)};break;case D:u=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}C[e]=u}var d=function(e){return this.hasOwnProperty(e)},y="[object String]",w="[object Array]",D="[object Function]",b="[object RegExp]",k="undefined",x={};x.trim=function(e){return e.replace(/^\s+|\s$/g,"")},x.getValue=function(e){return e.value||e.getAttribute("data-value")||""},x.getLengthParams=function(e){var r="The parameters for length is illegal.";e=e[0];var t=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,u=e.match(t);if(null===u)throw new TypeError(r);var a=u[2],n=u[3];if(typeof a===k)a=0;else if("("===u[1])a=+a+1;else{if("["!==u[1])throw new TypeError(r);a=+a}if(typeof n===k)n=1/0;else if(")"===u[4])n=+n-1;else{if("]"!==u[4])throw new TypeError(r);n=+n}if(a!==a||n!==n)throw new TypeError(r);return[a,n]},x.getRangeParams=function(e){var r="The parameters for range is illegal.";e=e[0];var t=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,u=e.match(t);if(null===u)throw new TypeError(r);var a,n,o=u[2],s=u[6];return o=typeof o===k?-(1/0):+o,a="["===u[1],s=typeof s===k?1/0:+s,n="]"===u[10],[a,o,s,n]};var E={"||":0,"&&":1,"!":2},m=l.prototype;m.add=function(e){function u(e){var u,a=e.rule;switch(r(a)){case D:u=a;break;case y:var n=this;u=function(e){var r=n.cs[a]||C[a]||A[a];if(typeof r===k)throw new TypeError("Cannot find checker: "+a);return r(e)};break;case b:u=function(r){var u=!0;if(t(r)){for(var n=0,o=r.length;o>n;++n)if(!a.test(r[n])){u=!1;break}}else e.rule.test(r)||(u=!1);return u};break;default:throw new TypeError("Rule type not support.")}this.cs[e.name]=u}if(t(e))for(var a=0,n=e.length;n>a;++a)u.call(this,e[a]);else u.call(this,e);return this},m.check=function(e){for(var r=!0,t=this.vs,u=0;u<t.length;++u){for(var a=t[u].$fs,n=t[u].rs,o=0;o<n.length;++o){var s=n[o];if(r=i.call(this,s.queue,a),!r){var l=a.length<2?a[0]:a;s.fail.call(l,e);break}}if(!r)break}return r},m.remove=function(e){function r(e){typeof this.cs[e]!==k&&delete this.cs[e]}if(t(e))for(var u=0,a=e.length;a>u;++u)r.call(this,e[u]);else r.call(this,e);return this};var A={},$={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,upperCase:/^[A-Z]+$/g,lowerCase:/^[a-z]$/g,empty:F,equal:f,"long":h,range:p},C={},z=l.is=function(e,r){var t=C[e]||A[e];if(!u(t))throw new TypeError("Checker for "+e+" is not defined.");return t(r)},T=l.not=function(e,r){var t=C[e]||A[e];if(!u(t))throw new TypeError("Checker for "+e+" is not defined.");return!t(r)};for(var _ in $)d.call($,_)&&v(_,$[_]);l.api=function(e){if(t(e))for(var r=0;r<e.length;++r)g.call(this,e[r]);else g.call(this,e);return l};var q=function(e,r){this.vs=[],this.cs={},this.$form="string"==typeof e?document.querySelectorAll(e)[0]:e,r=r||[],t(r)||(r=[r]);for(var u=0,a=r.length;a>u;++u){var o=r[u].field;t(o)||(o=[o]);for(var s=[],i=0;i<o.length;++i){var l=this.$form.querySelectorAll("[name="+o[i]+"]")[0]||this.$form.querySelectorAll("[data-name="+o[i]+"]")[0];if(typeof l===k)throw new TypeError("未找到域："+o[i]);s.push(l)}var c=r[u].rules;c=t(c)?c:[c];for(var f=0;f<c.length;++f)c[f].queue=n(c[f].type);this.vs.push({$fs:s,rs:c})}};q.prototype=new l,q.prototype.constructor=q,q.prototype.check=function(){return l.prototype.check.call(this,this.$form)},e.Validator=l,e.FormValidator=q});
//# sourceMappingURL=spa-public-validator.min.js.map