!function(r){r(window)}(function(r){function e(r){return Object.prototype.toString.call(r)}function t(r){return e(r)===y}function u(r){return e(r)===b}function a(r){return r.value||r.getAttribute("data-value")||""}function n(r,e){return E[r]>=E[e]}function s(r){for(var e,t=[],u=[],a=[],s=0,o="",i="",l=r.length;l>s;)switch(e=r[s++]){case"{":case"}":case"!":o.length>0&&t.push(o),t.push(e),o="";break;case"&":case"|":e===i?(o.length>0&&t.push(o),t.push(i+i),o="",i=""):i+=e;break;default:o+=e}o.length>0&&t.push(o),s=0,l=t.length;for(var c,F;l>s;)switch(e=t[s++]){case"{":a.push(e);break;case"||":case"&&":case"!":for(c=a.length-1;c>=0&&("||"===a[c]||"&&"===a[c]||"!"===a[c])&&n(a[c],e);)u.push(a.pop()),c--;a.push(e);break;case"}":for(c=a.length-1;c>=0&&(F=a.pop(),"{"!==F);)u.push(F),c--;break;default:u.push(e)}if(a.length>0)for(c=a.length-1;c>=0&&(F=a.pop(),"{"!==F);)u.push(F),c--;return u}function o(r,e,t){var n=r.split(":");r=n[0].replace(/length/i,"long");var s=t?C[r]||A[r]:this.cs[r]||C[r]||A[r];if(!u(s))throw new TypeError("Checker for rule "+n[0]+" must be a Function.");var o,i=n.slice(1);switch(r){case"long":o=x.getLengthParams(i);break;case"range":o=x.getRangeParams(i);break;default:o=i}if(t)o.unshift(e);else{for(var l=[],c=0;c<e.length;++c)l.push(a(e[c]));o.unshift(l)}return s.apply(null,o)}function i(r,t,u){for(var a=[],n=0;n<r.length;++n){var s=r[n];switch(s){case"&&":var i=a.pop(),l=a.pop(),c=(e(l)===w?o.call(this,l,t,u):l)&&(e(i)===w?o.call(this,i,t,u):i);a.push(c);break;case"||":var i=a.pop(),l=a.pop(),c=(e(l)===w?o.call(this,l,t,u):l)||(e(i)===w?o.call(this,i,t,u):i);a.push(c);break;case"!":var l=a.pop(),c=!(e(l)===w?o.call(this,l,t,u):l);a.push(c);break;default:a.push(s)}}var F=a.pop();return e(F)===w?o.call(this,F,t,u):F}function l(r){r=r||[],this.cs={},this.vs=[],t(r)||(r=[r]);for(var e=0;e<r.length;++e){var u=r[e].field;t(u)||(u=[u]);var a=r[e].rules;a=t(a)?a:[a];for(var n=0;n<a.length;++n)a[n].queue=s(a[n].type);this.vs.push({$fs:u,rs:a})}}function c(r){return null===r||typeof r===k||""===r}function F(r){for(var e=!0,t=0;t<r.length-1;++t)if(r[t]!==r[t+1]){e=!1;break}return e}function f(r){for(var e=!0,t=0;t<r.length;++t)if(!c(r[t])){e=!1;break}return e}function h(r,e,t){for(var u=!0,a=0;a<r.length;++a){var n=r[a].length;if(e>n||n>t){u=!1;break}}return u}function p(r,e,t,u,a){for(var n=!0,s=0;s<r.length;++s){var o=r[s];if(e&&t>o||a&&o>u||!e&&t>=o||!a&&o>=u){n=!1;break}}return n}function v(r,t){var u;switch(e(t)){case D:u=function(r){return t.test(r)};break;case b:u=t;break;default:throw new TypeError("Matcher Type Error.")}A[r]=u,z[r]=u,T[r]=function(){return!u.apply(null,arguments)}}function g(r,t){var u;switch(e(t)){case w:var a;try{a=s(t)}catch(n){throw new Error(n)}u=a;break;case D:u=function(r){return t.test(r)};break;case b:u=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}C[r]=u}var d=function(r){return this.hasOwnProperty(r)},w="[object String]",y="[object Array]",b="[object Function]",D="[object RegExp]",k="undefined",x={};x.trim=function(r){return r.replace(/^\s+|\s$/g,"")},x.getLengthParams=function(r){var e="The parameters for length is illegal.";r=r[0];var t=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,u=r.match(t);if(null===u)throw new TypeError(e);var a=u[2],n=u[3];if(typeof a===k)a=0;else if("("===u[1])a=+a+1;else{if("["!==u[1])throw new TypeError(e);a=+a}if(typeof n===k)n=1/0;else if(")"===u[4])n=+n-1;else{if("]"!==u[4])throw new TypeError(e);n=+n}if(a!==a||n!==n)throw new TypeError(e);return[a,n]},x.getRangeParams=function(r){var e="The parameters for range is illegal.";r=r[0];var t=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,u=r.match(t);if(null===u)throw new TypeError(e);var a,n,s=u[2],o=u[6];return s=typeof s===k?-(1/0):+s,a="["===u[1],o=typeof o===k?1/0:+o,n="]"===u[10],[a,s,o,n]};var E={"||":0,"&&":1,"!":2},m=l.prototype;m.add=function(r){function u(r){var u,a=r.rule;switch(e(a)){case b:u=a;break;case w:var n=this;u=function(r){var e=n.cs[a]||C[a]||A[a];if(typeof e===k)throw new TypeError("Cannot find checker: "+a);return e(r)};break;case D:u=function(e){var u=!0;if(t(e)){for(var n=0,s=e.length;s>n;++n)if(!a.test(e[n])){u=!1;break}}else r.rule.test(e)||(u=!1);return u};break;default:throw new TypeError("Rule type not support.")}this.cs[r.name]=u}if(t(r))for(var a=0,n=r.length;n>a;++a)u.call(this,r[a]);else u.call(this,r);return this},m.check=function(r){for(var e=!0,t=this.vs,u=0;u<t.length;++u){for(var a=t[u].$fs,n=t[u].rs,s=0;s<n.length;++s){var o=n[s];if(e=i.call(this,o.queue,a,!1),!e){var l=a.length<2?a[0]:a;o.fail.call(l,r);break}}if(!e)break}return e},m.remove=function(r){function e(r){typeof this.cs[r]!==k&&delete this.cs[r]}if(t(r))for(var u=0,a=r.length;a>u;++u)e.call(this,r[u]);else e.call(this,r);return this};var A={},$={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,upperCase:/^[A-Z]+$/g,lowerCase:/^[a-z]$/g,empty:f,equal:F,"long":h,range:p},C={},z=l.is=function(r,t){var u,a=C[r]||A[r];switch(e(a)){case y:u=i.call(this,a,t,!0);break;case b:u=a(t);break;default:throw new TypeError("Checker for "+r+" is not defined.")}return u},T=l.not=function(r,e){return!z(r,e)};for(var _ in $)d.call($,_)&&v(_,$[_]);l.api=function(r){for(var e in r)d.call(r,e)&&g.call(this,e,r[e]);return this};var q=function(r,e){this.vs=[],this.cs={},this.$form="string"==typeof r?document.querySelectorAll(r)[0]:r,e=e||[],t(e)||(e=[e]);for(var u=0,a=e.length;a>u;++u){var n=e[u].field;t(n)||(n=[n]);for(var o=[],i=0;i<n.length;++i){var l=this.$form.querySelectorAll("[name="+n[i]+"]")[0]||this.$form.querySelectorAll("[data-name="+n[i]+"]")[0];if(typeof l===k)throw new TypeError("未找到域："+n[i]);o.push(l)}var c=e[u].rules;c=t(c)?c:[c];for(var F=0;F<c.length;++F)c[F].queue=s(c[F].type);this.vs.push({$fs:o,rs:c})}};q.prototype=new l,q.prototype.constructor=q,q.prototype.check=function(){return l.prototype.check.call(this,this.$form)},r.Validator=l,r.FormValidator=q});
//# sourceMappingURL=spa-public-validator.min.js.map