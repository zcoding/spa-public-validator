!function(e){e(window)}(function(e){function r(e){return Object.prototype.toString.call(e)}function t(e){return r(e)===d}function u(e){return r(e)===w}function n(e){this.cs={},e=e||[],this.vs=[],t(e)||(e=[e]);for(var r=0,u=e.length;u>r;++r){var n=e[r].field;t(n)||(n=[n]);for(var a=[],o=0;o<n.length;++o)a.push(this.$form.querySelectorAll("[name="+n[o]+"]")[0]);var s=e[r].rules;s=t(s)?s:[s],this.vs.push({$field:a,rules:s})}}function a(e){return null===e||typeof e===D||""===e}function o(e){for(var r=!0,t=0;t<e.length-1;++t)if(e[t]!==e[t+1]){r=!1;break}return r}function s(e){for(var r=!0,t=0;t<e.length;++t)if(!a(e[t])){r=!1;break}return r}function i(e,r,t){for(var u=!0,n=0;n<e.length;++n){var a=e[n].length;if(r>a||a>t){u=!1;break}}return u}function l(e,r,t,u,n){for(var a=!0,o=0;o<e.length;++o){var s=e[o];if(r&&t>s||n&&s>u||!r&&t>=s||!n&&s>=u){a=!1;break}}return a}function f(e,t){var u;switch(r(t)){case y:u=function(e){return t.test(e)};break;case w:u=t;break;default:throw new TypeError("Matcher Type Error.")}x[e]=u,A[e]=u,$[e]=function(){return u.apply(null,arguments)}}function F(e){var r=e.split(":");e=r[0].replace(/length/i,"long");var t=this.cs[e]||m[e]||x[e];if(!u(t))throw new TypeError("Checker for rule "+r[0]+" must be a Function.");var n,a=r.slice(1);switch(e){case"long":n=b.getLengthParams(a);break;case"range":n=b.getRangeParams(a);break;default:n=a}return[t,n]}function c(e,r){return T[e]>=T[r]}function h(e){for(var r,t=[],u=[],n=[],a=0,o="",s="",i=e.length;i>a;)switch(r=e[a++]){case"{":case"}":case"!":o.length>0&&t.push(o),t.push(r),o="";break;case"&":case"|":r===s?(o.length>0&&t.push(o),t.push(s+s),o="",s=""):s+=r;break;default:o+=r}o.length>0&&t.push(o),a=0,i=t.length;for(var l,f;i>a;)switch(r=t[a++]){case"{":n.push(r);break;case"||":case"&&":case"!":for(l=n.length-1;l>=0&&("||"===n[l]||"&&"===n[l]||"!"===n[l])&&c(n[l],r);)u.push(n.pop()),l--;n.push(r);break;case"}":for(l=n.length-1;l>=0&&(f=n.pop(),"{"!==f);)u.push(f),l--;break;default:u.push(r)}if(n.length>0)for(l=n.length-1;l>=0&&(f=n.pop(),"{"!==f);)u.push(f),l--;return u}function p(e,r){for(var t=[],u=0;u<r.length;++u)t.push(b.getValue(r[u]));return e[1].unshift(t),e[0].apply(null,e[1])}var v=function(e){return this.hasOwnProperty(e)},g="[object String]",d="[object Array]",w="[object Function]",y="[object RegExp]",D="undefined",b={};b.trim=function(e){return e.replace(/^\s+|\s$/g,"")},b.getValue=function(e){return e.value||e.getAttribute("data-value")||""},b.getLengthParams=function(e){var r="The parameters for length is illegal.";e=e[0];var t=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,u=e.match(t);if(null===u)throw new TypeError(r);var n=u[2],a=u[3];if(typeof n===D)n=0;else if("("===u[1])n=+n+1;else{if("["!==u[1])throw new TypeError(r);n=+n}if(typeof a===D)a=1/0;else if(")"===u[4])a=+a-1;else{if("]"!==u[4])throw new TypeError(r);a=+a}if(n!==n||a!==a)throw new TypeError(r);return[n,a]},b.getRangeParams=function(e){var r="The parameters for range is illegal.";e=e[0];var t=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,u=e.match(t);if(null===u)throw new TypeError(r);var n,a,o=u[2],s=u[6];return o=typeof o===D?-(1/0):+o,n="["===u[1],s=typeof s===D?1/0:+s,a="]"===u[10],[n,o,s,a]};var k=n.prototype;k.add=function(e){function u(e){var u,n=e.rule;switch(r(n)){case w:u=n;break;case g:var a=this;u=function(e){var r=a.cs[n]||m[n]||x[n];if(typeof r===D)throw new TypeError("Cannot find checker: "+n);return r(e)};break;case y:u=function(r){var u=!0;if(t(r)){for(var a=0,o=r.length;o>a;++a)if(!n.test(r[a])){u=!1;break}}else e.rule.test(r)||(u=!1);return u};break;default:throw new TypeError("Rule type not support.")}this.cs[e.name]=u}if(t(e))for(var n=0,a=e.length;a>n;++n)u.call(this,e[n]);else u.call(this,e);return this},k.check=function(){return this},k.remove=function(e){function r(e){typeof this.cs[e]!==D&&delete this.cs[e]}if(t(e))for(var u=0,n=e.length;n>u;++u)r(e[u]);else r(e);return this};var x={},E={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,upperCase:/^[A-Z]+$/g,lowerCase:/^[a-z]$/g,empty:s,equal:o,"long":i,range:l},m={},A=n.is=function(e,r){var t=m[e]||x[e];if(!u(t))throw new TypeError("Checker for "+e+" is not defined.");return t(r)},$=n.not=function(e,r){var t=m[e]||x[e];if(!u(t))throw new TypeError("Checker for "+e+" is not defined.");return function(e){return!t(e)}};for(var C in E)v.call(E,C)&&f(C,E[C]);n.api=function(e){function u(e,t){var u;switch(r(t)){case g:var n=t.split(":"),a=x[n[0]];if(typeof a===D)throw new TypeError("Checker "+n[0]+" is not defined.");u=function(e){return a.call(this,n.slice(1))};break;case y:u=function(e){return t.test(e)};break;case w:u=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}m[e]=u}if(t(e))for(var a=0;a<e.length;++a)u(e[a]);else u(e);return n};var z=function(e,r){this.vs=[],this.$form="string"==typeof e?document.querySelectorAll(e)[0]:e,t(r)||(r=[r]);for(var u=0,n=r.length;n>u;++u){var a=r[u].field;t(a)||(a=[a]);for(var o=[],s=0;s<a.length;++s){var i=this.$form.querySelectorAll("[name="+a[s]+"]")[0]||this.$form.querySelectorAll("[data-name="+a[s]+"]")[0];if(typeof i===D)throw new TypeError("未找到域："+a[s]);o.push(i)}var l=r[u].rules;l=t(l)?l:[l];for(var f=0;f<l.length;++f)l[f].queue=h(l[f].type);this.vs.push({$fs:o,rs:l})}};z.prototype=new n,z.prototype.constructor=z;var T={"||":0,"&&":1,"!":2};z.prototype.check=function(){for(var e,t,u=this.$form,n=this.vs,a=!0,o=0;o<n.length;++o){var s,i,i=[];e=n[o].$fs,t=n[o].rs;for(var l=0;l<t.length;++l){s=t[l],ruleQueue=s.queue,i.splice(0,i.length);for(var f=0;f<ruleQueue.length;++f){var c=ruleQueue[f];switch(c){case"&&":var h=i.pop(),v=i.pop(),d=(r(v)===g?p(F.call(this,v),e):v)&&(r(h)===g?p(F.call(this,h),e):h);i.push(d);break;case"||":var h=i.pop(),v=i.pop(),d=(r(v)===g?p(F.call(this,v),e):v)||(r(h)===g?p(F.call(this,h),e):h);i.push(d);break;case"!":var v=i.pop(),d=!(r(v)===g?p(F.call(this,v),e):v);i.push(d);break;default:i.push(c)}}var w=i.pop();if(a=r(w)===g?p(F.call(this,w),e):w,!a){var y=e.length<2?e[0]:e;s.fail.call(y,u);break}}if(!a)break}return a},e.Validator=n,e.FormValidator=z});
//# sourceMappingURL=spa-public-validator.min.js.map