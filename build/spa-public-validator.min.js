!function(e){e(window)}(function(e){function r(e,r){var t;switch(c.type(r)){case c.TYPE_REGEXP:t=function(e){return r.test(e)};break;case c.TYPE_FUNCTION:t=r;break;default:throw new TypeError("Matcher Type Error.")}h.checkers[e]=t}function t(e){return null===e||"undefined"==typeof e||""===e}function n(e){for(var r=!0,t=0,n=e.length;n-1>t;++t)if(e[t]!==e[t+1]){r=!1;break}return r}function u(e){for(var r=!0,n=0,u=e.length;u>n;++n)if(!t(e[n])){r=!1;break}return r}function a(e,r,t){for(var n=!0,u=0,a=e.length;a>u;++u){var i=e[u].length;if(r>i||i>t){n=!1;break}}return n}function i(e,r,t){for(var n=!0,u=0,a=e.length;a>u;++u);return n}function o(e,r){y[e]=r,v[e]=function(e){return!r(e)}}function s(e){var r=e.split(":");e=r[0].replace(/length/i,"long");var t=this.checkers[e]||g.checkers[e]||h.checkers[e];if(!c.isFunction(t))throw new TypeError("Checker for rule "+r[0]+" must be a Function.");var n,u=r.slice(1);switch(e){case"long":case"range":n=c.getLengthParams(u);break;default:n=u}return[t,n]}var F=Object.prototype.toString,c={};c.trim=function(e){return e.replace(/^\s+|\s$/g,"")},c.isArray=function(e){return c.type(e)===c.TYPE_ARRAY},c.isFunction=function(e){return c.type(e)===c.TYPE_FUNCTION},c.getValue=function(e){return"undefined"==typeof e.value?e.getAttribute("data-value")||"":e.value},c.getLengthParams=function(e){e=e[0];var r=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,t=e.match(r);if(null===t)throw new TypeError("The parameters for length is illegal.");var n=t[2],u=t[3];if("undefined"==typeof n)n=0;else if("("===t[1])n=+n+1;else{if("["!==t[1])throw new TypeError("The parameters for length is illegal.");n=+n}if("undefined"==typeof u)u=Infinite;else if(")"===t[4])u=+u-1;else{if("]"!==t[4])throw new TypeError("The parameters for length is illegal.");u=+u}if(n!==n||u!==u)throw new TypeError("The parameters for length is illegal.");return[n,u]},c.type=function(e){return F.call(e)},c.TYPE_STRING="[object String]",c.TYPE_ARRAY="[object Array]",c.TYPE_FUNCTION="[object Function]",c.TYPE_REGEXP="[object RegExp]";var l=function(e){this.checkers={},e=e||[],this.validations=[],c.isArray(e)||(e=[e]);for(var r=0,t=e.length;t>r;++r){var n=e[r].field;c.isArray(n)||(n=[n]);for(var u=[],a=0;a<n.length;++a)u.push(this.$form.querySelectorAll("[name="+n[a]+"]")[0]);var i=e[r].rules;i=c.isArray(i)?i:[i],this.validations.push({$field:u,rules:i})}},f=l.prototype;f.add=function(e){function r(e){switch(c.type(e.rule)){case c.TYPE_FUNCTION:this.checkers[e.name]=e.rule;break;case c.TYPE_STRING:this.checkers[e.name]=function(){};break;case c.TYPE_REGEXP:this.checkers[e.name]=function(r){var t=!0;if(c.isArray(r)){for(var n=0,u=r.length;u>n;++n)if(!e.rule.test(r[n])){t=!1;break}}else e.rule.test(r)||(t=!1);return t};break;default:throw new TypeError("Rule type not support.")}}if(c.isArray(e))for(var t=0,n=e.length;n>t;++t)r.call(this,e[t]);else r.call(this,e);return this},f.check=function(){return this},f.remove=function(e){function r(e){"undefined"!=typeof this.checkers[e]&&delete this.checkers[e]}if(c.isArray(e))for(var t=0,n=e.length;n>t;++t)r(e[t]);else r(e);return this};var h={};h.checkers={};var p=(h.rules=["empty","long","email","url","yes"],{url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,upperCase:/^[A-Z]+$/g,lowerCase:/^[a-z]$/g,empty:u,equal:n,"long":a,range:i});for(var d in p)p.hasOwnProperty(d)&&r(d,p[d]);var y=l.is=function(e,r){var t=g.checkers[e]||h.checkers[e];if(!c.isFunction(t))throw new TypeError("Checker for "+e+" is not defined.");return t(r)},v=l.not=function(e,r){var t=g.checkers[e]||checkers[e];if(!c.isFunction(t))throw new TypeError("Checker for "+e+" is not defined.");return function(e){return!t(e)}};for(var E in h.checkers)h.checkers.hasOwnProperty(E)&&o(E,h.checkers[E]);var g={};g.checkers={},l.api=function(e){function r(e,r){var t,n=c.type(r);switch(n){case c.TYPE_STRING:var u=r.split(":"),a=h.checkers[u[0]];if("undefined"==typeof a)throw new TypeError("Checker "+u[0]+" is not defined.");t=function(e){return a.call(this,u.slice(1))};break;case c.TYPE_REGEXP:t=function(e){return r.test(e)};break;case c.TYPE_FUNCTION:t=r;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}g[e]=t}if(c.isArray(e))for(var t=0,n=e.length;n>t;++t)r(e[t]);else r(e);return l},l.extend=function(e){return e.prototype=new l,e.prototype.constructor=e,e};var k=l.extend(function(e,r){this.$form="string"==typeof e?document.querySelectorAll(e)[0]:e,this.validations=[],c.isArray(r)||(r=[r]);for(var t=0,n=r.length;n>t;++t){var u=r[t].field;c.isArray(u)||(u=[u]);for(var a=[],i=0;i<u.length;++i)a.push(this.$form.querySelectorAll("[name="+u[i]+"]")[0]);var o=r[t].rules;o=c.isArray(o)?o:[o],this.validations.push({$field:a,rules:o})}});k.prototype.check=function(){for(var e=this.$form,r=this.validations,t=!0,n=0,u=r.length;u>n;++n){for(var a=r[n].$field,i=r[n].rules,o=0;o<i.length;++o){for(var F=i[o],l="!"===F.type[0],f=l?F.type.slice(1):F.type,h=s.call(this,f),p=[],d=0;d<a.length;++d)p.push(c.getValue(a[d]));h[1].unshift(p);var y=h[0].apply(null,h[1]);if(l&&y||!l&&!y){var v=a.length<2?a[0]:a;F.fail.call(v,e),t=!1;break}}if(!t)break}return t},e.Validator=l,e.FormValidator=k});
//# sourceMappingURL=spa-public-validator.min.js.map