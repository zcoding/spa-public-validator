!function(e){e(window)}(function(e){function r(e){return Object.prototype.toString.call(e)}function a(e){return r(e)===g}function t(e){return e.value||e.getAttribute("data-value")||""}function u(e,r){return D[e]>=D[r]}function n(e){for(var r,a=[],t=[],n=[],s=0,F="",f="",d=e.length;d>s;)switch(r=e[s++]){case"{":case"}":case"!":F.length>0&&a.push(F),a.push(r),F="";break;case"&":case"|":r===f?(F.length>0&&a.push(F),a.push(f+f),F="",f=""):f+=r;break;default:F+=r}F.length>0&&a.push(F),s=0,d=a.length;for(var o,i;d>s;)switch(r=a[s++]){case"{":n.push(r);break;case"||":case"&&":case"!":for(o=n.length-1;o>=0&&("||"===n[o]||"&&"===n[o]||"!"===n[o])&&u(n[o],r);)t.push(n.pop()),o--;n.push(r);break;case"}":for(o=n.length-1;o>=0&&(i=n.pop(),"{"!==i);)t.push(i),o--;break;default:t.push(r)}if(n.length>0)for(o=n.length-1;o>=0&&(i=n.pop(),"{"!==i);)t.push(i),o--;return t}function s(e,a,u){var n=e.split(":");e=n[0].replace(/length/i,"long");var s,f=u?m[e]||z[e]:this.cs[e]||m[e]||z[e];switch(r(f)){case g:s=F.call(this,f,a,u);break;case b:var d,o=n.slice(1);switch(e){case"long":d=k.getLengthParams(o);break;case"range":d=k.getRangeParams(o);break;default:d=o}if(u)d.unshift(a);else{for(var i=[],l=0;l<a.length;++l)i.push(t(a[l]));d.unshift(i)}s=f.apply(null,d);break;default:throw new TypeError("Checker for rule "+n[0]+" must be a Function.")}return s}function F(e,a,t){for(var u=[],n=0;n<e.length;++n){var F=e[n];switch(F){case"&&":var f=u.pop(),d=u.pop(),o=(r(d)===v?s.call(this,d,a,t):d)&&(r(f)===v?s.call(this,f,a,t):f);u.push(o);break;case"||":var f=u.pop(),d=u.pop(),o=(r(d)===v?s.call(this,d,a,t):d)||(r(f)===v?s.call(this,f,a,t):f);u.push(o);break;case"!":var d=u.pop(),o=!(r(d)===v?s.call(this,d,a,t):d);u.push(o);break;default:u.push(F)}}var i=u.pop();return r(i)===v?s.call(this,i,a,t):i}function f(e){e=e||[],this.cs={},this.vs=[],a(e)||(e=[e]);for(var r=0;r<e.length;++r){var t=e[r].field;a(t)||(t=[t]);var u=e[r].rules;u=a(u)?u:[u];for(var s=0;s<u.length;++s)u[s].queue=n(u[s].type);this.vs.push({$fs:t,rs:u})}}function d(e){return null===e||typeof e===y||""===e}function o(e){if(!a(e))return!1;for(var r=!0,t=0;t<e.length-1;++t)if(e[t]!==e[t+1]){r=!1;break}return r}function i(e){var r;if(a(e)){r=!0;for(var t=0;t<e.length;++t)if(!d(e[t])){r=!1;break}}else r=d(e);return r}function l(e,r,t){var u,n;if(r=r||-(1/0),t=t||1/0,a(e)){u=!0;for(var s=0;s<e.length;++s)if(n=e[s].length,r>n||n>t){u=!1;break}}else n=e.length,u=n>=r&&t>=n;return u}function c(e,r,t,u,n){var s;if(a(e)){s=!0;for(var F=0;F<e.length;++F){var f=Number(e[F]);if(r&&t>f||n&&f>u||!r&&t>=f||!n&&f>=u){s=!1;break}}}else e=Number(e),s=(r&&e>=t||!r&&e>t)&&(n&&u>=e||!n&&u>e);return s}function h(e,t){var u;switch(r(t)){case w:u=function(e){var r;if(a(e)){r=!0;for(var u=0;u<e.length;++u)if(!t.test(e[u])){r=!1;break}}else r=t.test(e);return r};break;case b:u=t;break;default:throw new TypeError("Matcher Type Error.")}z[e]=u,$[e]=u,Z[e]=function(){return!u.apply(null,arguments)}}function p(e,t){var u;switch(r(t)){case v:var s;try{s=n(t)}catch(F){throw new Error(F)}u=s;break;case w:u=function(e){var r=!0;if(a(e)){for(var u=0;u<e.length;++u)if(!t.test(e[u])){r=!1;break}}else r=t.test(e);return r};break;case b:u=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}m[e]=u}var A=function(e){return this.hasOwnProperty(e)},v="[object String]",g="[object Array]",b="[object Function]",w="[object RegExp]",y="undefined",k={};k.trim=function(e){return e.replace(/^\s+|\s$/g,"")},k.getLengthParams=function(e){var r="The parameters for length is illegal.";e=e[0];var a=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,t=e.match(a);if(null===t)throw new TypeError(r);var u=t[2],n=t[3];if(typeof u===y)u=0;else if("("===t[1])u=+u+1;else{if("["!==t[1])throw new TypeError(r);u=+u}if(typeof n===y)n=1/0;else if(")"===t[4])n=+n-1;else{if("]"!==t[4])throw new TypeError(r);n=+n}if(u!==u||n!==n)throw new TypeError(r);return[u,n]},k.getRangeParams=function(e){var r="The parameters for range is illegal.";e=e[0];var a=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,t=e.match(a);if(null===t)throw new TypeError(r);var u,n,s=t[2],F=t[6];return s=typeof s===y?-(1/0):+s,u="["===t[1],F=typeof F===y?1/0:+F,n="]"===t[10],[u,s,F,n]};var D={"||":0,"&&":1,"!":2},x=f.prototype;x.add=function(e){function t(e,t){var u,s=t;switch(r(s)){case b:u=s;break;case v:try{u=n(s)}catch(F){throw new Error("Cannot parse rule expression.")}break;case w:u=function(e){var r=!0;if(a(e)){for(var u=0,n=e.length;n>u;++u)if(!s.test(e[u])){r=!1;break}}else t.rule.test(e)||(r=!1);return r};break;default:throw new TypeError("Rule type not support.")}this.cs[e]=u}for(var u in e)A.call(e,u)&&t.call(this,u,e[u]);return this},x.check=function(e){for(var r=!0,a=this.vs,t=0;t<a.length;++t){for(var u=a[t].$fs,n=a[t].rs,s=0;s<n.length;++s){var f=n[s];if(r=F.call(this,f.queue,u,!1),!r){var d=u.length<2?u[0]:u;f.fail.call(d,e);break}}if(!r)break}return r},x.remove=function(e){function r(e){typeof this.cs[e]!==y&&delete this.cs[e]}if(a(e))for(var t=0,u=e.length;u>t;++t)r.call(this,e[t]);else r.call(this,e);return this};var z={},E={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,upperCase:/^[A-Z]+$/,lowerCase:/^[a-z]+$/,empty:i,equal:o,"long":l,range:c},m={},$=f.is=function(e,a){var t,u=m[e]||z[e];switch(r(u)){case g:t=F.call(this,u,a,!0);break;case b:t=u(a);break;default:throw new TypeError("Checker for "+e+" is not defined.")}return t},Z=f.not=function(e,r){return!$(e,r)};for(var C in E)A.call(E,C)&&h(C,E[C]);f.api=function(e){for(var r in e)A.call(e,r)&&p.call(this,r,e[r]);return this},f.api.list=function(){console.log(m)};var T=function(e,r){this.vs=[],this.cs={},this.$form="string"==typeof e?document.querySelectorAll(e)[0]:e,r=r||[],a(r)||(r=[r]);for(var t=0,u=r.length;u>t;++t){var s=r[t].field;a(s)||(s=[s]);for(var F=[],f=0;f<s.length;++f){var d=this.$form.querySelectorAll("[name="+s[f]+"]")[0]||this.$form.querySelectorAll("[data-name="+s[f]+"]")[0];if(typeof d===y)throw new TypeError("未找到域："+s[f]);F.push(d)}var o=r[t].rules;o=a(o)?o:[o];for(var i=0;i<o.length;++i)o[i].queue=n(o[i].type);this.vs.push({$fs:F,rs:o})}};T.prototype=new f,T.prototype.constructor=T,T.prototype.check=function(){return f.prototype.check.call(this,this.$form)},e.Validator=f,e.FormValidator=T});
//# sourceMappingURL=spa-public-validator.min.js.map