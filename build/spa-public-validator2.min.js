!function(e){e(window)}(function(e){function r(e){return Object.prototype.toString.call(e)}function a(e){return r(e)===z}function t(e){return e.value||e.getAttribute("data-value")||""}function u(e){var r="The parameters for length is illegal.";e=e[0];var a=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,t=e.match(a);if(null===t)throw new TypeError(r);var u=t[2],n=t[3];if(typeof u===Z)u=0;else if("("===t[1])u=+u+1;else{if("["!==t[1])throw new TypeError(r);u=+u}if(typeof n===Z)n=1/0;else if(")"===t[4])n=+n-1;else{if("]"!==t[4])throw new TypeError(r);n=+n}if(u!==u||n!==n)throw new TypeError(r);return[u,n]}function n(e){var r="The parameters for range is illegal.";e=e[0];var a=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,t=e.match(a);if(null===t)throw new TypeError(r);var u,n,f=t[2],s=t[6];return f=typeof f===Z?-(1/0):+f,u="["===t[1],s=typeof s===Z?1/0:+s,n="]"===t[10],[u,f,s,n]}function f(e,r){return C[e]>=C[r]}function s(e){for(var r,a=[],t=[],u=[],n=0,s="",l="",o=e.length;o>n;)switch(r=e[n++]){case"{":case"}":case"!":s.length>0&&a.push(s),a.push(r),s="";break;case"&":case"|":r===l?(s.length>0&&a.push(s),a.push(l+l),s="",l=""):l+=r;break;default:s+=r}s.length>0&&a.push(s),n=0,o=a.length;for(var i,d;o>n;)switch(r=a[n++]){case"{":u.push(r);break;case"||":case"&&":case"!":for(i=u.length-1;i>=0&&("||"===u[i]||"&&"===u[i]||"!"===u[i])&&f(u[i],r);)t.push(u.pop()),i--;u.push(r);break;case"}":for(i=u.length-1;i>=0&&(d=u.pop(),"{"!==d);)t.push(d),i--;break;default:t.push(r)}if(u.length>0)for(i=u.length-1;i>=0&&(d=u.pop(),"{"!==d);)t.push(d),i--;return t}function l(e,a,f){var l=e.split(":");e=l[0].replace(/length/i,"long");var i,d=f?R[e]||_[e]:this.cs[e]||R[e]||_[e];switch(r(d)){case z:i=o.call(this,d,a,f);break;case E:var F,c=l.slice(1);switch(e){case"long":F=u(c);break;case"range":F=n(c);break;default:F=c}if(f)F.unshift(a);else{var h=[];if(null!==a)for(var p=0;p<a.length;++p)h.push(t(a[p]));F.unshift(h)}i=d.apply(null,F);break;case m:i=d;break;default:if("all"!==e)throw new TypeError("Checker for rule "+l[0]+" must be a Function.");var v=s(l.slice(1));i=o.call(this,v,a,f)}return i}function o(e,a,t){for(var u=[],n=0;n<e.length;++n){var f=e[n];switch(f){case"&&":var s=u.pop(),o=u.pop(),i=r(o)===x?l.call(this,o,a,t):o,d=r(s)===x?l.call(this,s,a,t):s,F=k.and(i,d);u.push(F);break;case"||":var s=u.pop(),o=u.pop(),i=r(o)===x?l.call(this,o,a,t):o,d=r(s)===x?l.call(this,s,a,t):s,F=k.or(i,d);u.push(F);break;case"!":var o=u.pop(),F=k.not(r(o)===x?l.call(this,o,a,t):o);u.push(F);break;default:u.push(f)}}var c=u.pop(),h=r(c)===x?l.call(this,c,a,t):c;return k.val(h)}function i(e){e=e||[],this.cs={},this.vs=d(e)}function d(e){e=r(e)===z?e:[e];for(var a=[],t=0;t<e.length;++t){var u=e[t],n={},f=r(u.field);n.fs=u.field?f===z?u.field:[u.field]:null,n.rs=[];for(var l=r(u.rules)===z?u.rules:[u.rules],o=0;o<l.length;++o){var i=l[o],F={};F["if"]=s(i["if"]),F.no=i.fail?i.fail:!1,F.yes=i.success?d(i.success):!1,n.rs.push(F)}a.push(n)}return a}function F(e,t){var u,n=t;switch(r(n)){case m:case E:u=n;break;case x:try{u=s(n)}catch(f){throw new Error("Cannot parse condition expression.")}break;case $:u=function(e){var r=!0;if(a(e)){for(var u=0,f=e.length;f>u;++u)if(!n.test(e[u])){r=!1;break}}else t.rule.test(e)||(r=!1);return r};break;default:throw new TypeError("Rule type not support.")}this.cs[e]=u}function c(e){typeof this.cs[e]!==Z&&delete this.cs[e]}function h(e){for(var r=!0,a=0;a<e.length;++a){for(var t=e[a],u=t.fs,n=t.rs,f=0;f<n.length;++f){var s=n[f],l=o.call(this,s["if"],u,!1);if(l=k.val(l),!l){var i=u.length<2?u[0]:u;s.no&&(r=!1,s.no.call(i));break}s.yes&&(r=h.call(this,s.yes))}if(!r)break}return r}function p(e){return null===e||typeof e===Z||""===e}function v(e){if(!a(e))return!1;for(var r=!0,t=0;t<e.length-1;++t)if(e[t]!==e[t+1]){r=!1;break}return r}function A(e){var r;if(a(e)){r=!0;for(var t=0;t<e.length;++t)if(!p(e[t])){r=!1;break}}else r=p(e);return r}function g(e,r,t){var u,n;if(r=r||-(1/0),t=t||1/0,a(e)){u=!0;for(var f=0;f<e.length;++f)if(n=e[f].length,r>n||n>t){u=!1;break}}else n=e.length,u=n>=r&&t>=n;return u}function b(e,r,t,u,n){var f;if(a(e)){f=!0;for(var s=0;s<e.length;++s){var l=Number(e[s]);if(r&&t>l||n&&l>u||!r&&t>=l||!n&&l>=u){f=!1;break}}}else e=Number(e),f=(r&&e>=t||!r&&e>t)&&(n&&u>=e||!n&&u>e);return f}function w(e,t){var u;switch(r(t)){case $:u=function(e){var r;if(a(e)){r=!0;for(var u=0;u<e.length;++u)if(!t.test(e[u])){r=!1;break}}else r=t.test(e);return r};break;case E:u=t;break;default:throw new TypeError("Matcher Type Error.")}_[e]=u,S[e]=u,q[e]=function(){return!u.apply(null,arguments)}}function y(e,t){var u;switch(r(t)){case x:var n;try{n=parseRules(t)}catch(f){throw new Error(f)}u=n;break;case $:u=function(e){var r=!0;if(a(e)){for(var u=0;u<e.length;++u)if(!t.test(e[u])){r=!1;break}}else r=t.test(e);return r};break;case E:u=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}R[e]=u}var k=function(){var e={};return e.or=function(e,r){var t=[],u=a(e),n=a(r);if(u&&n)for(var f=0;f<e.length;++f)t[f]=e[f]||r[f];else if(u)for(var f=0;f<e.length;++f)t[f]=e[f]||r;else if(n)for(var f=0;f<r.length;++f)t[f]=r[f]||e;else t=e||r;return t},e.and=function(e,r){var t=[],u=a(e),n=a(r);if(u&&n)for(var f=0;f<e.length;++f)t[f]=e[f]&&r[f];else if(u)for(var f=0;f<e.length;++f)t[f]=e[f]&&r;else if(n)for(var f=0;f<r.length;++f)t[f]=r[f]&&e;else t=e&&r;return t},e.not=function(e){var r=[];if(a(e))for(var t=0;t<e.length;++t)r[t]=!e[t];else r=!e;return r},e.val=function(e){var r=!0;if(a(e))for(var t=0;t<e.length;++t)r=r&&e[t];else r=r&&e;return r},e}(),D=function(e){return this.hasOwnProperty(e)},x="[object String]",z="[object Array]",E="[object Function]",$="[object RegExp]",m="[object Boolean]",Z="undefined",C={"||":0,"&&":1,"!":2},T=i.prototype;T.add=function(e){for(var r in e)D.call(e,r)&&F.call(this,r,e[r]);return this},T.remove=function(e){if(a(e))for(var r=0;r<e.length;++r)c.call(this,e[r]);else c.call(this,e);return this},T.check=function(){return h.call(this,this.vs)};var _={},j={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,upperCase:/^[A-Z]+$/,lowerCase:/^[a-z]+$/,empty:A,equal:v,"long":g,range:b},R={},S=i.is=function(e,a){var t,u=R[e]||_[e];switch(r(u)){case z:t=calculateRules.call(this,u,a,!0);break;case E:t=u(a);break;default:throw new TypeError("Checker for "+e+" is not defined.")}return t},q=i.not=function(e,r){return!S(e,r)};for(var N in j)D.call(j,N)&&w(N,j[N]);i.api=function(e){for(var r in e)D.call(e,r)&&y.call(this,r,e[r]);return this},i.api.list=function(){console.log(R)};var O=function(e,r){this.vs=[],this.cs={},this.$form="string"==typeof e?document.querySelectorAll(e)[0]:e,r=r||[],a(r)||(r=[r]);for(var t=0,u=r.length;u>t;++t){var n=r[t].field;a(n)||(n=[n]);for(var f=[],s=0;s<n.length;++s){var l=this.$form.querySelectorAll("[name="+n[s]+"]")[0]||this.$form.querySelectorAll("[data-name="+n[s]+"]")[0];if(typeof l===Z)throw new TypeError("未找到域："+n[s]);f.push(l)}var o=r[t].rules;o=a(o)?o:[o];for(var i=0;i<o.length;++i)o[i].queue=parseRules(o[i].type);this.vs.push({$fs:f,rs:o})}};O.prototype=new i,O.prototype.constructor=O,O.prototype.check=function(){return i.prototype.check.call(this,this.$form)},e.Validator=i,e.FormValidator=O});
//# sourceMappingURL=spa-public-validator2.min.js.map