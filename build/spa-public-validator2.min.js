!function(r){r(window)}(function(r){function e(r){return Object.prototype.toString.call(r)}function a(r){return e(r)===k}function t(r){return r.value||r.getAttribute("data-value")||""}function n(r,e){return $[r]>=$[e]}function u(r){for(var e,a=[],t=[],u=[],f=0,s="",o="",F=r.length;F>f;)switch(e=r[f++]){case"{":case"}":case"!":s.length>0&&a.push(s),a.push(e),s="";break;case"&":case"|":e===o?(s.length>0&&a.push(s),a.push(o+o),s="",o=""):o+=e;break;default:s+=e}s.length>0&&a.push(s),f=0,F=a.length;for(var d,i;F>f;)switch(e=a[f++]){case"{":u.push(e);break;case"||":case"&&":case"!":for(d=u.length-1;d>=0&&("||"===u[d]||"&&"===u[d]||"!"===u[d])&&n(u[d],e);)t.push(u.pop()),d--;u.push(e);break;case"}":for(d=u.length-1;d>=0&&(i=u.pop(),"{"!==i);)t.push(i),d--;break;default:t.push(e)}if(u.length>0)for(d=u.length-1;d>=0&&(i=u.pop(),"{"!==i);)t.push(i),d--;return t}function f(r,a,n){var u=r.split(":");r=u[0].replace(/length/i,"long");var f,o=n?_[r]||C[r]:this.cs[r]||_[r]||C[r];switch(e(o)){case k:f=s.call(this,o,a,n);break;case D:var F,d=u.slice(1);switch(r){case"long":F=m.getLengthParams(d);break;case"range":F=m.getRangeParams(d);break;default:F=d}if(n)F.unshift(a);else{for(var i=[],l=0;l<a.length;++l)i.push(t(a[l]));F.unshift(i)}f=o.apply(null,F);break;default:throw new TypeError("Checker for rule "+u[0]+" must be a Function.")}return f}function s(r,a,t){for(var n=[],u=0;u<r.length;++u){var s=r[u];switch(s){case"&&":var o=n.pop(),F=n.pop(),d=e(F)===y?f.call(this,F,a,t):F,i=e(o)===y?f.call(this,o,a,t):o,l=b.and(d,i);n.push(l);break;case"||":var o=n.pop(),F=n.pop(),d=e(F)===y?f.call(this,F,a,t):F,i=e(o)===y?f.call(this,o,a,t):o,l=b.or(d,i);n.push(l);break;case"!":var F=n.pop(),l=b.not(e(F)===y?f.call(this,F,a,t):F);n.push(l);break;default:n.push(s)}}var c=n.pop();return e(c)===y?f.call(this,c,a,t):c}function o(r){r=r||[],this.cs={},this.vs=F(r)}function F(r){r=e(r)===k?r:[r];for(var a=[],t=0;t<r.length;++t){var n=r[t],f={},s=e(n.field);f.fs=n.field?s===k?n.field:[n.field]:null,f.rs=[];for(var o=e(n.rules)===k?n.rules:[n.rules],d=0;d<o.length;++d){var i=o[d],l={};l["if"]=u(i["if"]),l.no=i.fail?i.fail:!1,l.yes=i.success?F(i.success):!1,f.rs.push(l)}a.push(f)}return a}function d(r,t){var n,f=t;switch(e(f)){case z:case D:n=f;break;case y:try{n=u(f)}catch(s){throw new Error("Cannot parse rule expression.")}break;case x:n=function(r){var e=!0;if(a(r)){for(var n=0,u=r.length;u>n;++n)if(!f.test(r[n])){e=!1;break}}else t.rule.test(r)||(e=!1);return e};break;default:throw new TypeError("Rule type not support.")}this.cs[r]=n}function i(r){typeof this.cs[r]!==E&&delete this.cs[r]}function l(r){return null===r||typeof r===E||""===r}function c(r){if(!a(r))return!1;for(var e=!0,t=0;t<r.length-1;++t)if(r[t]!==r[t+1]){e=!1;break}return e}function h(r){var e;if(a(r)){e=!0;for(var t=0;t<r.length;++t)if(!l(r[t])){e=!1;break}}else e=l(r);return e}function p(r,e,t){var n,u;if(e=e||-(1/0),t=t||1/0,a(r)){n=!0;for(var f=0;f<r.length;++f)if(u=r[f].length,e>u||u>t){n=!1;break}}else u=r.length,n=u>=e&&t>=u;return n}function A(r,e,t,n,u){var f;if(a(r)){f=!0;for(var s=0;s<r.length;++s){var o=Number(r[s]);if(e&&t>o||u&&o>n||!e&&t>=o||!u&&o>=n){f=!1;break}}}else r=Number(r),f=(e&&r>=t||!e&&r>t)&&(u&&n>=r||!u&&n>r);return f}function v(r,t){var n;switch(e(t)){case x:n=function(r){var e;if(a(r)){e=!0;for(var n=0;n<r.length;++n)if(!t.test(r[n])){e=!1;break}}else e=t.test(r);return e};break;case D:n=t;break;default:throw new TypeError("Matcher Type Error.")}C[r]=n,j[r]=n,S[r]=function(){return!n.apply(null,arguments)}}function g(r,t){var n;switch(e(t)){case y:var f;try{f=u(t)}catch(s){throw new Error(s)}n=f;break;case x:n=function(r){var e=!0;if(a(r)){for(var n=0;n<r.length;++n)if(!t.test(r[n])){e=!1;break}}else e=t.test(r);return e};break;case D:n=t;break;default:throw new TypeError("Checker must be a String/RegExp/Function.")}_[r]=n}var b=function(){var r={};r.or=function(r,e){var t=[];if(a(e))for(var n=0;n<r.length;++n)t[n]=r[n]||e[n];else for(var n=0;n<r.length;++n)t[n]=r[n]||e;return t},r.and=function(r,e){var t=[];if(a(e))for(var n=0;n<r.length;++n)t[n]=r[n]&&e[n];else for(var n=0;n<r.length;++n)t[n]=r[n]&&e;return t},r.not=function(r){for(var e=[],a=0;a<r.length;++a)e[a]=!r[a];return e},r.val=function(r){for(var e=!0,a=0;a<r.length;++a)e&=r[a];return e}}(),w=function(r){return this.hasOwnProperty(r)},y="[object String]",k="[object Array]",D="[object Function]",x="[object RegExp]",z="[object Boolean]",E="undefined",m={};m.trim=function(r){return r.replace(/^\s+|\s$/g,"")},m.getLengthParams=function(r){var e="The parameters for length is illegal.";r=r[0];var a=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,t=r.match(a);if(null===t)throw new TypeError(e);var n=t[2],u=t[3];if(typeof n===E)n=0;else if("("===t[1])n=+n+1;else{if("["!==t[1])throw new TypeError(e);n=+n}if(typeof u===E)u=1/0;else if(")"===t[4])u=+u-1;else{if("]"!==t[4])throw new TypeError(e);u=+u}if(n!==n||u!==u)throw new TypeError(e);return[n,u]},m.getRangeParams=function(r){var e="The parameters for range is illegal.";r=r[0];var a=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,t=r.match(a);if(null===t)throw new TypeError(e);var n,u,f=t[2],s=t[6];return f=typeof f===E?-(1/0):+f,n="["===t[1],s=typeof s===E?1/0:+s,u="]"===t[10],[n,f,s,u]};var $={"||":0,"&&":1,"!":2},Z=o.prototype;Z.add=function(r){for(var e in r)w.call(r,e)&&d.call(this,e,r[e]);return this},Z.remove=function(r){if(a(r))for(var e=0;e<r.length;++e)i.call(this,r[e]);else i.call(this,r);return this},Z.check=function(){for(var r=!0,e=this.vs,a=0;a<e.length;++a){for(var t=e[a],n=t.fs,u=t.rs,f=0;f<u.length;++f){var o=u[f];if(r=s.call(this,o["if"],n,!1),!r){var F=n.length<2?n[0]:n;o.no&&o.no.call(F);break}}if(!r)break}return r};var C={},T={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,upperCase:/^[A-Z]+$/,lowerCase:/^[a-z]+$/,empty:h,equal:c,"long":p,range:A},_={},j=o.is=function(r,a){var t,n=_[r]||C[r];switch(e(n)){case k:t=s.call(this,n,a,!0);break;case D:t=n(a);break;default:throw new TypeError("Checker for "+r+" is not defined.")}return t},S=o.not=function(r,e){return!j(r,e)};for(var q in T)w.call(T,q)&&v(q,T[q]);o.api=function(r){for(var e in r)w.call(r,e)&&g.call(this,e,r[e]);return this},o.api.list=function(){console.log(_)};var P=function(r,e){this.vs=[],this.cs={},this.$form="string"==typeof r?document.querySelectorAll(r)[0]:r,e=e||[],a(e)||(e=[e]);for(var t=0,n=e.length;n>t;++t){var f=e[t].field;a(f)||(f=[f]);for(var s=[],o=0;o<f.length;++o){var F=this.$form.querySelectorAll("[name="+f[o]+"]")[0]||this.$form.querySelectorAll("[data-name="+f[o]+"]")[0];if(typeof F===E)throw new TypeError("未找到域："+f[o]);s.push(F)}var d=e[t].rules;d=a(d)?d:[d];for(var i=0;i<d.length;++i)d[i].queue=u(d[i].type);this.vs.push({$fs:s,rs:d})}};P.prototype=new o,P.prototype.constructor=P,P.prototype.check=function(){return o.prototype.check.call(this,this.$form)},r.Validator=o,r.FormValidator=P});
//# sourceMappingURL=spa-public-validator2.min.js.map