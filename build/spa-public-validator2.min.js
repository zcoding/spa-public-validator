!function(r){r(window)}(function(r){function e(r){return Object.prototype.toString.call(r)}function a(r){return e(r)===k}function t(r){return typeof r.value!==Z?r.value||"":typeof r.getAttribute!==Z?r.getAttribute("data-value")||"":r||""}function n(r){var e="The parameters for length is illegal.";r=r[0];var a=/\s*([\(\[])\s*(\d+)?\s*,\s*(\d+)?\s*([\)\]])\s*/,t=r.match(a);if(null===t)throw new TypeError(e);var n=t[2],u=t[3];if(typeof n===Z)n=0;else if("("===t[1])n=+n+1;else{if("["!==t[1])throw new TypeError(e);n=+n}if(typeof u===Z)u=1/0;else if(")"===t[4])u=+u-1;else{if("]"!==t[4])throw new TypeError(e);u=+u}if(n!==n||u!==u)throw new TypeError(e);return[n,u]}function u(r){var e="The parameters for range is illegal.";r=r[0];var a=/\s*([\(\[])\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*,\s*((0|([\+\-]?[1-9]\d*))(\.[0-9]+)?)?\s*([\)\]])\s*/,t=r.match(a);if(null===t)throw new TypeError(e);var n,u,l=t[2],f=t[6];return l=typeof l===Z?-(1/0):+l,n="["===t[1],f=typeof f===Z?1/0:+f,u="]"===t[10],[n,l,f,u]}function l(r,e){return C[r]>=C[e]}function f(r){for(var e,a=[],t=[],n=[],u=0,f="",s="",o=r.length;o>u;)switch(e=r[u++]){case"{":case"}":case"!":f.length>0&&a.push(f),a.push(e),f="";break;case"&":case"|":e===s?(f.length>0&&a.push(f),a.push(s+s),f="",s=""):s+=e;break;default:f+=e}f.length>0&&a.push(f),u=0,o=a.length;for(var i,F;o>u;)switch(e=a[u++]){case"{":n.push(e);break;case"||":case"&&":case"!":for(i=n.length-1;i>=0&&("||"===n[i]||"&&"===n[i]||"!"===n[i])&&l(n[i],e);)t.push(n.pop()),i--;n.push(e);break;case"}":for(i=n.length-1;i>=0&&(F=n.pop(),"{"!==F);)t.push(F),i--;break;default:t.push(e)}if(n.length>0)for(i=n.length-1;i>=0&&(F=n.pop(),"{"!==F);)t.push(F),i--;return t}function s(r,a,l){var s=r.split(":");r=s[0].replace(/length/i,"long");var i,F=l?q[r]||_[r]:this.cs[r]||q[r]||_[r];switch(e(F)){case k:i=o.call(this,F,a,l);break;case E:var d,c=s.slice(1);switch(r){case"long":d=n(c);break;case"range":d=u(c);break;default:d=c}if(l)d.unshift(a);else{var h=[];if(null!==a)for(var p=0;p<a.length;++p)h.push(t(a[p]));d.unshift(h)}i=F.apply(null,d);break;case $:i=F;break;default:if("all"!==r)throw new TypeError("Checker for rule "+s[0]+" must be a Function.");var v=f(s.slice(1));i=w.val(o.call(this,v,a,l))}return i}function o(r,a,t){for(var n=[],u=0;u<r.length;++u){var l=r[u];switch(l){case"&&":var f=n.pop(),o=n.pop(),i=e(o)===z?s.call(this,o,a,t):o,F=e(f)===z?s.call(this,f,a,t):f,d=w.and(i,F);n.push(d);break;case"||":var f=n.pop(),o=n.pop(),i=e(o)===z?s.call(this,o,a,t):o,F=e(f)===z?s.call(this,f,a,t):f,d=w.or(i,F);n.push(d);break;case"!":var o=n.pop(),d=w.not(e(o)===z?s.call(this,o,a,t):o);n.push(d);break;default:n.push(l)}}var c=n.pop();return e(c)===z?s.call(this,c,a,t):c}function i(r){r=r||[],this.cs={},this.vs=F(r)}function F(r){r=e(r)===k?r:[r];for(var a=[],t=0;t<r.length;++t){var n=r[t],u={},l=e(n.field);u.fs=n.field?l===k?n.field:[n.field]:null,u.rs=[];for(var s=e(n.rules)===k?n.rules:[n.rules],o=0;o<s.length;++o){var i=s[o],d={};d["if"]=f(i["if"]),d.no=i.fail?i.fail:!1,d.yes=i.success?F(i.success):!1,u.rs.push(d)}a.push(u)}return a}function d(r,t){var n,u=t;switch(e(u)){case $:case E:n=u;break;case z:try{n=f(u)}catch(l){throw new Error("Cannot parse condition expression.")}break;case m:n=function(r){var e=!0;if(a(r)){for(var n=0,l=r.length;l>n;++n)if(!u.test(r[n])){e=!1;break}}else t.rule.test(r)||(e=!1);return e};break;default:throw new TypeError("Rule type not support.")}this.cs[r]=n}function c(r){typeof this.cs[r]!==Z&&delete this.cs[r]}function h(r){for(var e=!0,a=0;a<r.length;++a){for(var t=r[a],n=t.fs,u=t.rs,l=0;l<u.length;++l){var f=u[l],s=o.call(this,f["if"],n,!1);if(s=w.val(s),!s){var i=n.length<2?n[0]:n;f.no&&(e=!1,f.no.call(i));break}f.yes&&(e=h.call(this,f.yes))}if(!e)break}return e}function p(r){return null===r||typeof r===Z||""===r}function v(r){if(!a(r))return!1;for(var e=!0,t=0;t<r.length-1;++t)if(r[t]!==r[t+1]){e=!1;break}return e}function A(r){var e;if(a(r)){e=[];for(var t=0;t<r.length;++t)e.push(p(r[t]))}else e=p(r);return e}function g(r,e,t){var n,u;if(e=e||-(1/0),t=t||1/0,a(r)){n=[];for(var l=0;l<r.length;++l)u=r[l].length,n.push(u>=e&&t>=u)}else u=r.length,n=u>=e&&t>=u;return n}function y(r,e,t,n,u){var l;if(a(r)){l=[];for(var f=0;f<r.length;++f){var s=Number(r[f]);l.push((e&&s>=t||!e&&s>t)&&(u&&n>=s||!u&&n>s))}}else r=Number(r),l=(e&&r>=t||!e&&r>t)&&(u&&n>=r||!u&&n>r);return l}function b(r,t){var n;switch(e(t)){case m:n=function(r){var e;if(a(r)){e=[];for(var n=0;n<r.length;++n)e.push(t.test(r[n]))}else e=t.test(r);return e};break;case E:n=t;break;default:throw new TypeError("Default Matcher Type Error.")}_[r]=n,S[r]=n,N[r]=function(){return w.not(n.apply(null,arguments))},O[r]=function(){return w.all(n.apply(null,arguments))},R[r]=function(){return w.any(n.apply(null,arguments))}}function D(r,t){var n;switch(e(t)){case z:var u;try{u=parseRules(t)}catch(l){throw console.error("无法解析的条件表达式"),new Error(l)}n=u;break;case m:n=function(r){var e;if(a(r)){e=[];for(var n=0;n<r.length;++n)e.push(t.test(r[n]))}else e=t.test(r);return e};break;case E:n=t;break;default:throw new TypeError("API Checker Type Error.")}q[r]=n}var w=function(){var r={};return r.or=function(r,e){var t=[],n=a(r),u=a(e);if(n&&u)for(var l=0;l<r.length;++l)t[l]=r[l]||e[l];else if(n)for(var l=0;l<r.length;++l)t[l]=r[l]||e;else if(u)for(var l=0;l<e.length;++l)t[l]=e[l]||r;else t=r||e;return t},r.and=function(r,e){var t=[],n=a(r),u=a(e);if(n&&u)for(var l=0;l<r.length;++l)t[l]=r[l]&&e[l];else if(n)for(var l=0;l<r.length;++l)t[l]=r[l]&&e;else if(u)for(var l=0;l<e.length;++l)t[l]=e[l]&&r;else t=r&&e;return t},r.not=function(r){var e=[];if(a(r))for(var t=0;t<r.length;++t)e[t]=!r[t];else e=!r;return e},r.val=function(r){var e=!0;if(a(r))for(var t=0;t<r.length;++t)e=e&&r[t];else e=e&&r;return e},r.all=function(r){var e=!0;if(a(r))for(var t=0;t<r.length;++t)e=e&&r[t];else e=e&&r;return e},r.any=function(r){var e=!0;if(a(r))for(var t=0;t<r.length;++t)e=e||r[t];else e=e||r;return e},r}(),x=function(r){return this.hasOwnProperty(r)},z="[object String]",k="[object Array]",E="[object Function]",m="[object RegExp]",$="[object Boolean]",Z="undefined",C={"||":0,"&&":1,"!":2},T=i.prototype;T.add=function(r){for(var e in r)x.call(r,e)&&d.call(this,e,r[e]);return this},T.remove=function(r){if(a(r))for(var e=0;e<r.length;++e)c.call(this,r[e]);else c.call(this,r);return this},T.check=function(){return h.call(this,this.vs)};var _={},j={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^(0|([\+\-]?[1-9]\d*))(\.[0-9]+)?$/,"int":/^(0|([\+\-]?[1-9]\d*))$/,positive:/^\+?[1-9]\d*$/,negative:/^\-[1-9]\d*$/,varName:/^[a-zA-Z_][a-zA-Z0-9_]*$/,nickName:/^[\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z_][\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_]*$/,QQ:/^[1-9][0-9]{4,}$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,upperCase:/^[A-Z]+$/,lowerCase:/^[a-z]+$/,empty:A,equal:v,"long":g,range:y},q={},S=i.is=function(r,e){return s.call(null,r,e,!0)},N=i.not=function(r,e){return w.not(S(r,e))},R=i.any=function(r,e){return w.any(S(r,e))},O=i.all=function(r,e){return w.all(S(r,e))};for(var P in j)x.call(j,P)&&b(P,j[P]);i.api=function(r){for(var e in r)x.call(r,e)&&D.call(this,e,r[e]);return this},i.api.list=function(){console.log(q)};var Q=function(r,e){this.vs=[],this.cs={},this.$form="string"==typeof r?document.querySelectorAll(r)[0]:r,e=e||[],a(e)||(e=[e]);for(var t=0,n=e.length;n>t;++t){var u=e[t].field;a(u)||(u=[u]);for(var l=[],f=0;f<u.length;++f){var s=this.$form.querySelectorAll("[name="+u[f]+"]")[0]||this.$form.querySelectorAll("[data-name="+u[f]+"]")[0];if(typeof s===Z)throw new TypeError("未找到域："+u[f]);l.push(s)}var o=e[t].rules;o=a(o)?o:[o];for(var i=0;i<o.length;++i)o[i].queue=parseRules(o[i].type);this.vs.push({$fs:l,rs:o})}};Q.prototype=new i,Q.prototype.constructor=Q,Q.prototype.check=function(){return i.prototype.check.call(this,this.$form)},r.Validator=i,r.FormValidator=Q});
//# sourceMappingURL=spa-public-validator2.min.js.map